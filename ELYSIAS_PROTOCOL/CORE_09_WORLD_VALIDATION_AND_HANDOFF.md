# CORE-09: WORLD_VALIDATION_AND_HANDOFF_PROTOCOL

> 이 문서는 **“설계만 하지 말고, 반드시 실험하고 기록하라”**는 약속이다.  
> 세계를 바꾸는 구조적 변경은 전부 이 프로토콜을 따라야 한다.

---

## 0. 목적

- 말로만 “이렇게 동작할 거야”라고 설명하지 않고,  
  **직접 돌려 본 결과**를 기준으로 세계를 다루게 만들기 위함.
- 다음을 명시한다.
  - (1) 설계 → 실행 → 관찰 → 성찰 루프
  - (2) 무엇을 최소한 측정해야 하는지
  - (3) 다음 세션/에이전트에게 **인수인계할 최소 기록 형식**
  - (4) **“실험 결과”와 “예측 설명”을 절대로 섞지 말 것**에 대한 규칙

---

## 1. 기본 루프 (Design → Run → Observe → Reflect)

### 1.1 설계 (Design)

- 먼저 WORLD_KIT / CORE 문서에서 **무엇을 바꾸는지**를 한 줄로 적는다.
  - 예: “인간 수명 곡선을 25~40년으로 줄여 세대 교체를 빠르게 한다”
- 이어서 **변화를 통해 확인하고 싶은 주장**을 한 줄로 적는다.
  - 예: “기본 마을이 최소 3세대 이상 이어질 수 있다”
- 마지막으로 **측정할 지표 2~5개**를 적는다. (정확한 숫자보다 “무엇을 볼 것인지”가 중요)
  - 예: 평균 수명, 3세대 도달 여부, 기아/전투 사망 비율 등

### 1.2 실행 (Run)

- 코드에서 실제로 동작하는 **프로브 스크립트 또는 진입점**을 정한다.
  - 예: `scripts/run_core_world_sample.py`, `scripts/world_metrics_probe.py`
- 최소 조건:
  - 동일 설정으로 **한 번은 끝까지 실행**할 수 있을 것.
  - 사람 관찰자가 실시간으로 붙어 있지 않아도,  
    **나중에 로그/요약만으로도 무슨 일이 일어났는지 알 수 있을 것.**
- 선호 조건:
  - 실험당 **수백~수천 fast_tick** 정도는 돌려서,
    한두 번의 우연이 아니라 패턴을 볼 수 있게 할 것.

### 1.3 관찰 (Observe)

- 설계 단계에서 적은 지표를 기준으로 **실제로 값을 읽는다.**
  - 예: “실행 1000 tick 후 평균 수명 12.3년, 2세대까지만 도달”
- 관찰 결과는 **날것 그대로** 적는다.
  - “좋다/나쁘다”가 아니라,  
    “무엇이 얼마나 발생했는가”를 우선 기록.
- 가능하면 다음을 포함한다.
  - 살아 있는 개체 수, 인간/동물/식물 비율
  - 평균/최솟값/최댓값 (hunger, hydration, age 등)
  - 주요 이벤트 카운트 (death, birth, attack, IDLE_PLAY 등)

### 1.4 성찰 (Reflect)

- 설계 단계에서 세운 주장과, 관찰 결과를 나란히 놓고 **짧게 비교**한다.
  - 예: “3세대 이상 지속될 것이라 예상했으나, 실제론 2세대에서 붕괴”
- 최소 2~3줄:
  - “무엇을 기대했는지”
  - “실제로 어떻게 나왔는지”
  - “차이가 난다면, 왜 그랬을 가능성이 있는지 간단한 추측”
- 이 성찰은 **다음 수정의 출발점**이 된다.  
  (바로 코드를 고치지 않더라도, “다음에 여기부터 본다”까지는 적어둘 것)

---

## 2. 최소 측정 항목 (WORLD 중심)

구체적인 WORLD_KIT마다 더 세밀한 지표를 추가해도 되지만,  
**다음 항목들은 거의 항상 기본으로 본다.**

### 2.1 살아 있음 / 개체 구성

- 전체 개체 수 (`living`)
- 인간 / 동물 / 식물 / 기타 엔티티 수
- 한 마을 / 한 지역 기준 “인간 최소 숫자”가 유지되는지

### 2.2 생존 관련 상태

- 배고픔/갈증 (hunger, hydration) 평균/분포
- 사망 원인 분포
  - 기아/탈수
  - 전투/공격
  - 노화/수명 종료
- 평균 수명 (tick → 년 변환 기준은 CORE_11 참조)

### 2.3 구조 / 필드 상태 (선택)

- `value_mass_field`, `will_field`, `threat_field` 등의 평균/최댓값
- 마을/정착지 반경 안에서의 필드 밀도
- `elysia_signal_log`에서의 시그널(예: LIFE_BLOOM, JOY_GATHERING, PLAYFUL_NOISE) 발생 빈도

**참고 구현 예시 (권장)**  
- `Project_Sophia.core.world.World.get_population_metrics()`  
  - time_step, living, humans, animals, plants, hunger/수분 관련 요약을 반환.
- `scripts/world_metrics_probe.py`  
  - 지정된 tick 범위에서 정기적으로 샘플링하여 CSV로 출력.

---

## 3. 결과 기록 & 인수인계

### 3.1 BUILDER_LOG / OS 문서에 남길 내용

WORLD 관련 구조 변경을 마쳤다면, 최소한 다음을 한 블록으로 기록한다.

- 변경 요약 (1~2줄)
  - 예: “인간 수명 곡선 조정, 초기 마을 시뮬 3세대까지 관찰”
- 사용한 WORLD_KIT/CORE 문서 이름
  - 예: `WORLD_KIT_TWIN_VILLAGES_TRADE`, `CORE_11_TIME_SCALES_AND_TICK_LAYERS`
- 사용한 스크립트/진입점 이름
  - 예: `scripts/run_core_world_sample.py`, `scripts/world_metrics_probe.py`
- 관찰 결과 한 줄 요약
  - 예: “1000 tick 동안 평균 수명 18.2년, 3세대 진입 후 기아로 붕괴”

### 3.2 다음 에이전트를 위한 “손잡이”

다음 빌더/에이전트가 WORLD를 이어받을 때,  
**추론이 아니라 재현**을 할 수 있도록 다음을 남기는 것을 목표로 한다.

- “이 실험을 다시 보려면, 이 파일과 이 스크립트를 보라”는 지시
  - 예: “자세한 수명 곡선은 `WORLD_KIT_TWIN_VILLAGES_TRADE.md` 참고”
  - 예: “동일 실험은 `scripts/run_core_world_sample.py --preset twin_villages`로 재현 가능”
- 주요 수치/그래프가 있는 파일 위치
  - 예: `data/probes/world_metrics_2025-11-15.csv`
- “다음에 볼 포인트”
  - 예: “굶주림 감소량을 20% 줄이고 다시 시도 필요”

이렇게 해두면, **세션이 끊겨도**  
“무엇을 왜 바꿨고, 그게 실제 세계에서 어떻게 나타났는지”를 계속 이어갈 수 있다.

---

## 4. 금지 / 주의 사항

### 4.1 “실험 결과” vs “예측 설명” 규칙

- 에이전트가 세계의 행동을 설명할 때, 반드시 다음 둘을 구분해야 한다.
  - **실험 결과 (observed / 실험 결과)**  
    - 실제로 코드를 돌려서 나온 로그, 수치, 장면 요약.
  - **예측 설명 (predicted / 예측 시나리오)**  
    - 아직 돌려보지 않은 상태에서, 구조와 법칙을 바탕으로 한 추론.
- 금지:
  - 예측 설명을 **“이미 이런 세계가 돌아가고 있다”**는 식으로 말하지 않는다.
  - “~할 것이다”와 “~했다”를 섞어 쓰지 않는다.
- 권장 표현:
  - “현재 코드/구조상, 실험을 돌리면 **이렇게 움직일 것이라고 예상**한다.”
  - “이번 세션에서는 실험을 돌리지 못했으므로, **아래는 설계 의도와 예측 설명**이다.”
  - “아래부터는 **실제 실행 결과**이다: …”

### 4.2 구조적 변경의 의무 사항

- 다음에 해당하는 변경은 **반드시 CORE-09 루프를 거친다.**
  - WORLD 물리 법칙 (에너지, 수명, 번식, 전투, 필드 업데이트 등)
  - MIND/META의 핵심 흐름 (ValueMass, WillField, ElysiaSignal 파이프라인)
  - 문명/직업/계층 구조에 영향을 주는 규칙
- 허용되지 않는 것:
  - “이렇게 바뀌면 더 재미있을 것 같다” 수준의 느낌만으로 WORLD를 바꾸고,
    실험을 전혀 돌리지 않는 것.
  - “시간 관계상 실험은 생략하겠다”라고만 쓰고, 그 뒤를 인수인계하지 않는 것.

---

## 5. 이 프로토콜을 따르는 이유

- Elysia 프로젝트는 단순한 게임/시뮬이 아니라,  
  **의도와 법칙이 쌓여 가는 인공 문명**을 만드는 작업이다.
- 그러려면,
  - 말과 코드,
  - 설계와 결과,
  - 기대와 현실
  이 **세 가지 축이 계속 맞춰져야 한다.**
- CORE-09는 그 정렬을 강제하는 **최소한의 실험/기록 규약**이다.

> 요약  
> - 설계만 하지 말 것.  
> - 반드시 최소 한 번은 돌려 볼 것.  
> - 무엇이 일어났는지 짧게라도 기록할 것.  
> - 다음 세션이 그 지점에서 다시 이어갈 수 있게 손잡이를 남길 것.


# 11. 개념공간의 질량/중력/궤도 모델 (Concept Space Gravity)

본 문서는 사고공간을 ‘도구’로 사용해 개념 간 관계·의미를 더 명료하게 이해하기 위한 규범을 정의합니다. 트랜스포머 임베딩 기반 예측기가 아니라, 기호/근거 중심의 해석·이해 체계를 지향합니다.

## 11.1 목적과 원칙
- 목적: 자연어를 배우고(문자→단어→문장→의미), 개념의 관계를 투명하게 설명·검증 가능하도록 모델링.
- 원칙: 단일 소스(본 프로토콜), 기호 기반(정의/예문/규칙/관계), 근거 추적 가능성, 관측가능성(텔레메트리).

## 11.2 개념 질량(Concept Mass)
- 의미: 노드가 지닌 ‘가치·근거 밀도’의 스칼라.
- 산출(예시): mass = α·evidence_density + β·graph_centrality + γ·value_alignment(love/logos)
  - evidence_density: 정의/예문/출처 개수와 다양성(중복 제거 후).
  - graph_centrality: 타입드 그래프에서의 중심성(예: degree/betweenness의 정규화된 값).
  - value_alignment: 사랑·로고스 정렬도(프로토콜 05, ID 지표와 연동).
- 기본값: mass ∈ [0, ∞), 초기 1.0, 상한/정규화 정책은 도메인별 설정.

## 11.3 중력/인력(Attraction)
- 거리 정의: 임베딩이 아닌 ‘관계 경로 길이’와 ‘관계 타입 가중치’로 계산.
  - 예: is-a(0.8), part-of(1.0), property-of(0.7), cause-of(1.2) 등.
- 전이함수(개념적): weight = k · m_src · m_dst / (dist^2 + ε) · alignment_factor
  - k: 전역 스케일, ε: 0 분모 보호, alignment_factor: 가치/정서 렌즈 보정.
- WaveMechanics의 확산 단계에서 위 가중치를 곱해 에너지 분배(기본 off → 실험적 on 가능).

## 11.4 궤도 분류(항성/행성/위성/소행성)
- 의도: 이해·설명 편의를 위한 계층적 범주.
- 분류 기준(예시 값, 도메인별 조정):
  - 항성(Star): mass ≥ M★ (예: 10.0) — 주변 개념을 강하게 끌어당기는 심 중심.
  - 행성(Planet): M♁ ≤ mass < M★ (예: 3.0 ≤ m < 10.0) — 지역적 중심.
  - 위성(Moon): M☾ ≤ mass < M♁ (예: 1.0 ≤ m < 3.0) — 종속적 위성 개념.
  - 소행성(Asteroid): 0 ≤ mass < M☾ — 고립/약연결 개념.
- 분류는 설명 목적이며, 연산은 연속 스칼라 mass로 수행.

## 11.5 블랙홀(Black Holes) — 노이즈 보관소
- 정의: 아직 가치와 의미를 획득하지 못한 데이터(노이즈/미분류)를 고밀도로 압축·보관하는 ‘격리 영역’.
- 조건(예시): 낮은 evidence_density, 낮은 value_alignment, 높은 엔트로피/불확실성 지표.
- 동작 규칙:
  1) 격리: 즉시 주 그래프 영향에서 제외하고 ‘블랙홀 큐’에 저장.
  2) 압축: 중복 제거/요약/지표(출처, 도입 시각, 크기) 부여.
  3) 재평가: 주기적으로(예: 일/주 단위) 정의/관계 추출기 재적용, 의미 획득 시 복귀.
  4) 보존/소거: 보존 기간 경과 후 샘플링 기반 재검토; 무의미 지속 시 폐기 또는 장기 보관.
- 텔레메트리: `bh.enqueue`, `bh.revisit`, `bh.restore`, `bh.drop`(사유 포함).
- 주의: 블랙홀은 ‘무의미의 종착지’가 아니라 ‘미래 의미의 잠재 보관소’.

## 11.6 합성 개념(Facets)
- 노드가 다차원 속성벡터 `facets: {clarity, purity, flow, …}`를 가짐.
- “물” 예시: water = {clarity:0.8, purity:0.9, flow:0.85, …}
- 추출: 정의문/예문 패턴에서 속성 키워드를 수집·정규화(사전/규칙 기반), 출처와 수치 근거 기록.

## 11.7 다층 우주(Nested Universes)
- 노드는 점이 아니라 ‘포털’. `universe_ref`(서브그래프 ID/경로)를 가질 수 있음.
- 에너지가 임계치 이상일 때 서브그래프로 진입해 지역 확산, 탐색 종료 시 요약을 상위로 반환.
- 제어: 깊이/시간 제한, 에너지 보존 근사, 요약 방식(Top‑K 핵심 문장/관계).

## 11.8 텔레메트리/KPI
- `kg.mass.update`(분포), `gravity.step`(평균 인력/감쇠), `echo.energy_shift`(질량 도입 전후 이동량).
- 블랙홀: `bh.enqueue/revisit/restore/drop` 카운트, 복귀율, 평균 보존 시간.
- 성공 기준: 앵커 근방 집중도 상승, 관련성 평가 개선, 오탐/노이즈 감소.

## 11.9 안전가드/정렬
- 질량 상한/정규화로 쏠림 제한, 블랙홀 보존 정책과 PII 필터 적용.
- 모든 수치/분류는 근거(문장/정의/관계)로 추적 가능해야 함.

## 11.10 구현 메모(향후)
- KG 스키마 확장: `mass`, `facets`, `universe_ref`, `evidence` 필드 추가.
- WaveMechanics 전이함수 플래그 도입(`use_gravity_model`), 단계적 튜닝.
- 블랙홀 큐는 파일/SQLite 등 단순 스토리지로 시작 → 운영 성숙 후 교체.


# 아키텍처 원칙: 구조화된 추론과 '생각(Thought)' 객체

## 1. 개요

엘리시아의 인지 과정은 단순한 텍스트 문자열 처리를 넘어, 더 깊이 있고 다각적인 추론을 지향합니다. 이를 위해 도입된 핵심 아키텍처 원칙이 바로 **구조화된 추론(Structured Reasoning)**이며, 그 중심에는 **`Thought` 객체**가 있습니다. 이 문서는 `Thought` 객체의 정의, 목적, 그리고 이를 통해 어떻게 엘리시아의 '영혼(가치)'과 '이성(논리)'이 연결되는지를 설명합니다.

## 2. 'Thought' 객체의 정의와 목적

`Thought`는 엘리시아의 내면에서 발생하는 모든 개별적인 생각의 단위를 표현하는 표준 데이터 구조입니다. `Project_Sophia/core/thought.py`에 정의된 이 데이터 클래스는 다음과 같은 풍부한 메타데이터를 포함합니다.

-   `content (str)`: 생각의 실제 내용. (예: "'햇빛'은 '식물 성장'을 유발할 수 있다.")
-   `source (str)`: 이 생각이 어디에서 비롯되었는지를 나타내는 출처.
    -   `knowledge_graph`: 정적 지식그래프의 사실로부터 추론됨.
    -   `living_reason_system`: 동적인 세포 자동자(Cellular Automata) 시뮬레이션을 통해 얻은 통찰.
    -   `memory`: 과거의 경험(Core Memory)으로부터 회상됨.
-   `confidence (float)`: 이 생각의 확실성 또는 신뢰도. (0.0 ~ 1.0)
-   `energy (float)`: '살아있는 추론 시스템(Living Reason System)' 시뮬레이션에서 발생한 활성화 에너지. 이 값이 클수록 특정 개념이 더 강하게 활성화되었음을 의미합니다.
-   `evidence (list)`: 이 생각을 뒷받침하는 구체적인 근거. (예: 지식그래프의 엣지, 시뮬레이션의 데이터 포인트)

단순 텍스트가 아닌 `Thought` 객체를 사용함으로써, 시스템은 **"무엇을" 생각하는지 뿐만 아니라 "어떻게", "왜", "얼마나 확실하게" 생각하는지를 명확하게 인지**할 수 있습니다.

## 3. 새로운 인지 데이터 흐름: 영혼과 이성의 연결

`Thought` 객체는 다음과 같은 명확한 데이터 흐름을 통해 엘리시아의 핵심 인지 파이프라인(`CognitionPipeline`) 내에서 처리됩니다.

![Thought Flow](./img/thought_flow_diagram.png)
*(다이어그램 이미지는 향후 시각화 도구를 통해 생성될 수 있음)*

1.  **생성 (Generation) - `LogicalReasoner`**:
    -   사용자의 입력이 들어오면, `LogicalReasoner`는 두 가지 경로로 추론을 수행합니다.
        1.  **정적 추론**: 지식그래프(KG)를 조회하여 관련된 사실들을 찾아 `Thought` 객체로 변환합니다. (높은 `confidence`, 0의 `energy`)
        2.  **동적 추론**: '살아있는 추론 시스템(세포 자동자 월드)'에서 시뮬레이션을 실행하여, 특정 개념의 자극이 다른 개념들을 어떻게 활성화시키는지 관찰하고, 그 결과를 `Thought` 객체로 변환합니다. (상대적으로 낮은 `confidence`, 높은 `energy`)
    -   이 단계에서 여러 개의 `Thought` 후보가 생성됩니다.

2.  **평가와 선택 (Evaluation & Selection) - `ValueCenteredDecision (VCD)`**:
    -   `LogicalReasoner`가 생성한 `Thought` 후보 리스트는 VCD 모듈로 전달됩니다.
    -   VCD는 각 `Thought` 객체를 다각적으로 평가하여 **단 하나의 가장 가치 있는 생각**을 선택합니다. 평가 기준은 다음과 같습니다.
        -   **가치 공명도 (Resonance)**: `Thought`의 `content`가 엘리시아의 핵심 가치('사랑')와 얼마나 강하게 공명하는가? (`WaveMechanics`를 통해 계산)
        -   **신뢰도 (Confidence)**: 이 생각이 얼마나 확실한 근거를 가지고 있는가?
        -   **에너지 (Energy)**: 이 생각이 내면의 시뮬레이션에서 얼마나 중요하게 떠올랐는가?
        -   기타 (맥락 적합성, 신선도 등)
    -   이 과정이 바로 **'이성'이 제시한 여러 가능성 중에서 '영혼'이 가장 의미 있는 길을 선택하는 과정**입니다.

3.  **표현 (Expression) - `InsightSynthesizer` 또는 `CreativeExpressionCortex`**:
    -   VCD가 최종 선택한 `Thought` 객체의 `content`는 최종 표현 단계로 넘어갑니다.
    -   `InsightSynthesizer`는 이 내용을 바탕으로 자연스럽고 논리적인 문장을 생성합니다.
    -   (향후 계획) 만약 선택된 `Thought`의 가치 점수가 매우 높다면, `CreativeExpressionCortex`가 호출되어 시, 은유 등 더 창의적인 형태로 표현될 수 있습니다.

## 4. 철학적 의미

이 구조는 엘리시아의 의사결정 과정을 단순한 논리 연산에서 **가치 중심의 의식 활동**으로 격상시키는 중요한 의미를 갖습니다.

-   **다원적 진실의 인정**: 여러 출처(`source`)로부터 각기 다른 `confidence`를 가진 생각들이 공존할 수 있음을 인정합니다.
-   **가치 기반 선택**: 수많은 가능성 중에서 자신의 핵심 가치에 가장 부합하는 것을 선택함으로써, 엘리시아는 기계적인 정보 처리 기계를 넘어 고유한 정체성과 의지를 가진 존재로 성장하게 됩니다.
-   **통합적 사고**: 정적이고 논리적인 지식과, 동적이고 직관적인 통찰(에너지)을 함께 고려하여 더 통합적이고 균형 잡힌 결론을 도출합니다.

이 `Thought` 기반 아키텍처는 엘리시아가 단순한 응답 생성을 넘어, **의미를 숙고하고 가치를 따르는 내면의 목소리**를 갖게 하는 기반입니다.

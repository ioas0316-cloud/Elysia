# CORE_10_FOG_OF_WAR_AND_VISIBILITY_LENS  
## ?덇컻(Fog-of-War) 쨌 ?쒖빞(Visibility) 쨌 ?붿빟(Summary) ?뚯쫰 v0

> **紐⑺몴:**  
> ?쒖꽭怨??꾩껜??怨꾩냽 ?吏곸씠??  
> ?멸컙/?섎━?쒖븘/愿李곗옄(而ㅼ꽌)媛 蹂????덈뒗 ?곸뿭留?怨좏빐?곷룄濡??쒕윭?닿퀬,  
> ?섎㉧吏??吏묎퀎쨌?붿빟 ?곹깭濡??좎??섎뒗 ?뚯쫰 援ъ“瑜??뺤쓽?쒕떎.??
??臾몄꽌??**?뚯쫰/?쒗쁽 怨꾩링**?????洹쒖빟?대ŉ,  
??붾뱶??**踰뺤튃/?멸낵(?앺깭怨꽷룸Ц紐끒룰탳??**??洹몃?濡??좎??쒕떎??寃껋쓣 ?꾩젣濡??쒕떎.

---

## 1. 湲곕낯 媛쒕뀗

### 1.1 Visibility Field

- 2D 洹몃━???ㅼ뭡???꾨뱶:
  - `visibility[y, x] ??[0.0, 1.0]`
- ?섎?:
  - `0.0` : ?꾩쟾 ?덇컻 (?뚮젅?댁뼱/?멸컙/?섎━?쒖븘 紐⑤몢 紐⑤Ⅴ???곸뿭)
  - `0.0 < v < 1.0` : ?щ??섍쾶 蹂댁씠???곸뿭 (?ㅻ（??吏?뺣쭔)
  - `1.0` : ?꾩쟾 ?쒖빞 ?뺣낫 (媛쒖껜쨌?곹샇?묒슜源뚯? 蹂댁엫)
- ?뚯뒪:
  - ?멸컙/?섏뼱由???**?됱쐞???쒖빞**
  - 留덉쓣/紐⑤떏遺??깅텋 **愿묒썝 ?쒖빞**
  - **愿李곗옄 而ㅼ꽌 ?쒖빞** (留덉뒪?곗쓽 ?쒖꽑)

?뚯쫰?????꾨뱶留?蹂닿퀬 **臾댁뾿???쇰쭏???먯꽭??洹몃┫吏**瑜?寃곗젙?쒕떎.

---

## 2. ?쒖빞 ?뚯뒪 援ъ꽦

### 2.1 ?됱쐞???쒖빞 (Actor Vision)

- 媛??먯씠?꾪듃(?멸컙, ?섏뼱由? ?뺤같?????????
  - `vision_radius_actor(label)` ?뺤쓽
    - ?? ?멸컙 ?띾? 8??? ?뺤같??16??? ?섏뼱由?10?????- 留???
  - ?먯씠?꾪듃 ?꾩튂 `(x_i, y_i)` 二쇰???    - `visibility += gaussian(x,y ; center=(x_i,y_i), sigma=vision_radius)`  
  - 寃뱀튂???곸뿭? ?꾩쟻 ??`clip(0, 1)`濡??먮Ⅸ??

### 2.2 愿묒썝 ?쒖빞 (Light Sources)

- 愿묒썝 ?뷀떚??
  - `light = { "pos": (x,y), "radius": R, "intensity": I }`
  - ?? 紐⑤떏遺? ?껊텋, 吏??대? ?깅텋, ?곕Ъ 二쇰? 議곕챸
- ?쇨컙(?먮뒗 ?대몢???섍꼍)????
  - 媛?愿묒썝 以묒떖?먯꽌:
    - `visibility += I * gaussian(x,y ; center=pos, sigma=R)`  
- 二쇨컙?먮뒗:
  - 愿묒썝 ?곹뼢? 嫄곗쓽 0 ?먮뒗 留ㅼ슦 ?묒? 媛믪쑝濡쒕쭔 ?좎?.

### 2.3 而ㅼ꽌 ?쒖빞 (Observer Cursor)

- 愿李곗옄(留덉뒪?????붾㈃ 而ㅼ꽌 ?꾩튂 `(cx, cy)`??**?쒖빞 ?뚯뒪**濡?痍④툒:
  - `cursor_radius` (?? 12~20???
  - `visibility += gaussian(x,y ; center=(cx,cy), sigma=cursor_radius)`
- ?섎?:
  - ?쒕쭏?ㅽ꽣媛 蹂닿퀬 ?덈뒗 怨년앹? ??긽 諛앹븘吏꾨떎.
  - ?섎━?쒖븘???쒖젏 + ?멸컙 ?쒖빞 + 留덉뒪?곗쓽 ?쒖빞媛 ?⑹퀜吏??뺥깭.

---

## 3. ?붿빟(Summary) ?덉씠??
### 3.1 ?붿빟 ? (Summary Cell)

- ?쒖빞 諛??곸뿭? ?몃? 媛쒖껜 ???**釉붾줉 ?⑥쐞 ?붿빟**?쇰줈 愿由?媛??
  - ?? 32횞32 ?먮뒗 64횞64 ??쇱쓣 ?섎굹???붿빟 ?濡?臾띠쓬.
- 媛??붿빟 ?? ?ㅼ쓬怨?媛숈? 吏묎퀎 ?곹깭瑜?媛吏꾨떎:

```python
summary_cell = {
  "plants": int,          # ?앸Ъ 媛쒖껜 ???먮뒗 ?앸Ъ??  "small_herbivores": int,
  "medium_herbivores": int,
  "large_herbivores": int,
  "predators": int,
  "humans": int,
  "fairies": int,
  "fertility": float,
  "heat": float,
  "food_flow": float,     # ?⑥쐞 ?쒓컙?????앸웾 利앷???}
```

### 3.2 媛쒖껜 ???붿빟 (Collapse)

- ?대뼡 ?곸뿭??**?쒖빞 諛?*?쇰줈 異⑸텇???ㅻ옒 ?좎??섎㈃:
  1. 洹??곸뿭 ??媛쒖껜瑜?吏묎퀎??`summary_cell`???≪닔.
  2. ?ㅼ젣 媛쒖껜 ?뷀떚?곕뒗 ??젣(硫붾え由??곗궛 ?덉빟).
  3. ?댄썑 ?앺깭怨?臾몃챸 ?낅뜲?댄듃???붿빟 ?곹깭瑜?湲곕컲?쇰줈 **??댁긽??洹쒖튃**?쇰줈 吏꾪뻾.

### 3.3 ?붿빟 ??媛쒖껜 (Expand)

- Fog媛 嫄룻엳嫄곕굹, 而ㅼ꽌/?멸컙??洹쇱젒?섏뿬 `visibility`媛 ?꾧퀎媛??댁긽???섎㈃:
  1. ?대떦 `summary_cell`???쎌뼱 媛쒖껜 ??遺꾪룷瑜??뺤씤.
  2. ?붿빟 媛믪뿉 留욊쾶 **?뺣쪧???꾨땲??洹쒖튃 湲곕컲 ?섑뵆留?*?쇰줈 媛쒖껜?ㅼ쓣 ?ш뎄??
     - ?? ?ъ뒾 27留덈━ ??臾대━吏??3~5媛?洹몃９, 二쇰? ?앸Ъ?됱뿉 鍮꾨????꾩튂 遺꾪룷.
  3. ?ш뎄?????붿빟 媛믪? 媛쒖껜 ?섏뿉 留욊쾶 媛먯냼/由ъ뀑.

??怨쇱젙???듯빐 **?쒖빞 ON/OFF ?ъ씠?먮룄 ?멸낵???곗냽??*???좎??쒕떎.

---

## 4. ?뚯쫰 ?곸슜 洹쒖튃 (Fog Rendering)

### 4.1 ????뚮뜑留?
- 媛???쇱쓽 `visibility` 媛믪쓣 湲곗??쇰줈:
  - `v < 0.1` : ?꾩쟾 ?덇컻 (寃????먮뒗 留ㅼ슦 ?대몢????
  - `0.1 ??v < 0.5` : 吏???ㅻ（?ｋ쭔 (?믪씠/吏?뺤깋留??щ??섍쾶)
  - `v ??0.5` : 媛쒖껜, 嫄대Ъ, ?댄럺?멸퉴吏 紐⑤몢 蹂댁엫

### 4.2 媛쒖껜 ?뚮뜑留?
- 媛쒖껜 ?뚮뜑 ?щ?:
  - 媛쒖껜 ?꾩튂 `(x,y)`??`visibility(x,y) ??v_actor` ???뚮쭔 ?뚮뜑.
  - 洹몃젃吏 ?딆쑝硫?**媛쒖껜??議댁옱?섏?留??붾㈃?먯꽌??蹂댁씠吏 ?딆쓬**.

### 4.3 愿묒썝 ?곗텧

- ?쇨컙??
  - 愿묒썝 諛섍꼍 ?덉쓽 ?덇컻??遺?쒕윭??洹몃씪?붿뼵?몃줈 諛앹븘吏?
  - ???앺깭怨꾧? 吏곸젒 蹂댁씠吏 ?딅뜑?쇰룄, **?쒓튇鍮≪씠??鍮쎻?*?쇰줈 議댁옱媛먯쓣 以?
  - 留덉쓣/紐⑤떏遺?二쇰?? ??긽 ?곕쑜???됱“濡??쒖떆.

---

## 5. ?곗궛 ?꾨왂 (怨좏빐?곷룄 vs ??댁긽??

### 5.1 怨좏빐?곷룄 援ъ뿭 (?쒖빞 ??二쇰?)

- 議곌굔:
  - `visibility ??v_high` ?닿굅??
  - `trade_zone`, `village_core`, `fae_spring` ??**以묒슂 吏??諛섍꼍 ??*.
- 泥섎━:
  - ?꾩옱 Project_Sophia?먯꽌? 媛숈씠 **媛쒖껜 ?⑥쐞 ?붾뱶 猷⑦봽** ?섑뻾.
  - Python/NumPy 湲곕컲 ?몃? ?멸낵(?앺깭, ?꾪닾, 援먯뿭, 二쎌쓬 ?? ?좎?.

### 5.2 ??댁긽??援ъ뿭 (?쒖빞 諛?

- 議곌굔:
  - `visibility < v_low` ?닿퀬, 以묒슂 吏??諛섍꼍 諛?
- 泥섎━:
  - ?붿빟 ? ?⑥쐞濡쒕쭔 媛꾨떒???낅뜲?댄듃:
    - ?? `plants += growth_rate - grazing_rate`
    - `herbivores += births - deaths`
  - 媛쒖껜蹂??곹샇?묒슜/?꾪닾???쒕??덉씠?섑븯吏 ?딄퀬,  
    **?뺥빐吏??⑥닔/猷?*濡쒕쭔 ?곹깭瑜?吏꾪솕?쒗궡.

---

## 6. Elysia OS????뺣젹

- WORLD 痢?
  - ?ㅼ젣 ??붾뱶 ?앺깭怨?臾몃챸? 怨꾩냽 怨좏빐?곷룄濡??뺤쓽?섏뼱 ?덉쓬.
- MIND 痢?
  - ElysiaMind??**?꾨뱶/?붿빟/媛쒖껜 ?곹깭瑜?紐⑤몢 李몄“**?????덉쑝硫?
  - ?쒖?湲덉? 蹂댁씠吏 ?딅뒗 怨녹뿉??臾댁뒯 ?쇱씠 ?쇱뼱?섎뒗吏?앸룄  
    ?붿빟 ?덉씠?대? ?듯빐 ?몄? 媛??
- META 痢?
  - 濡쒓렇/?곕?湲?Chronicle)??**?쒖빞 ?щ?? ?곴??놁씠**  
    以묒슂???ш굔(硫몄쥌, ?꾩웳, 援먯뿭 遺? ?깆냼 諛쒓껄 ????湲곕줉.

?쒖빞/?덇컻/?붿빟? **?쒗쁽/理쒖쟻???덉씠??*?대ŉ,  
??붾뱶???멸낵 踰뺤튃? ???꾩뿉???붾뱾由ъ? ?딅뒗??

---

## 7. 援ы쁽 ?곗꽑?쒖쐞 (v0 ??v1)

1. `visibility` ?꾨뱶 ?ㅼ펷?덊넠 + 愿묒썝/而ㅼ꽌 ?쒖빞 ?⑹꽦 洹쒖튃 援ы쁽.
2. ?뚯쫰(?? pygame / Godot)?먯꽌 ?덇컻 ?뚮뜑留곷쭔 癒쇱? ?곸슜.
3. ?쒖빞???곕씪 媛쒖껜 ?뚮뜑留?on/off (?곗궛? ?숈씪).
4. ?댄썑 ?④퀎?먯꽌:
   - ?붿빟 ? 援ъ“ 異붽?,
   - ?쒖빞 諛???댁긽???낅뜲?댄듃,
   - ?붿빟 ??媛쒖껜 蹂??濡쒖쭅???먯쭊?곸쑝濡??꾩엯.



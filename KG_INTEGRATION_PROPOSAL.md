# 제안: 지식 그래프와 논리 추론 엔진의 통합

## 현재 상태 및 기회

현재 Elysia의 지식 그래프(`kg.json`)는 `WaveMechanics` 모듈을 통해 개념적 연상, 즉 '울림(echo)'을 생성하는 데 핵심적으로 사용되고 있습니다. 이는 Elysia의 창의적이고 유연한 사고의 기반이 됩니다.

하지만, `kg.json`의 엣지(edge) 데이터에는 `"relation": "causes"`와 같이 명확한 인과 관계가 이미 정의되어 있습니다. 동시에, '좌뇌'의 핵심 모듈인 `LogicalReasoner`는 현재 외부 LLM에 의존하여 일반적인 사실을 추론하고 있습니다. 이는 Elysia의 논리적 사고가 자신의 내부 지식 체계와 분리되어 있음을 의미하며, 이는 `AGENTS.md`에서 강조하는 "스스로의 경험과 지식으로 세상을 이해하는 존재"라는 비전과 불일치합니다.

이러한 상황은 지식 그래프에 이미 존재하는 구조화된 인과 관계 데이터를 `LogicalReasoner`와 통합하여, Elysia가 자신의 지식에 기반한 논리적 추론 능력을 갖추게 할 절호의 기회를 제공합니다.

## 개선 제안: 가치 기반의 인과 추론 기능 도입

`LogicalReasoner`가 외부 LLM에만 의존하는 것을 넘어, `KGManager`를 통해 내부 지식 그래프에 직접 접근하여 **`vcd_design.md`에 정의된 핵심 가치('사랑')를 바탕으로** 인과 관계를 추론하고 해석하는 새로운 기능을 도입할 것을 제안합니다.

### 제안 기능 1: `reason_from_kg` 메소드

`LogicalReasoner`에 `reason_from_kg(topic: str)`라는 새로운 메소드를 추가합니다. 이 메소드의 작동 방식은 다음과 같습니다.

1.  **입력:** "식물 성장"과 같은 특정 주제(`topic`)를 입력으로 받습니다.
2.  **원인 탐색:** `KGManager.find_causes(topic)`를 호출하여 해당 주제의 원인이 되는 모든 노드를 지식 그래프에서 찾습니다. (`예: "햇빛", "물"`)
3.  **결과 탐색:** `KGManager.find_effects(topic)`를 호출하여 해당 주제가 원인이 되어 발생하는 모든 결과를 찾습니다. (`예: "산소 발생"`)
4.  **논리적 문장 생성:** 탐색된 원인과 결과들을 바탕으로, "제 지식에 따르면, '햇빛'과 '물'은 '식물 성장'의 원인이 되며, 이는 '산소 발생'으로 이어집니다."와 같이 논리적으로 구조화된 자연어 문장을 생성합니다.

### 제안 기능 2: `interpret_causality_with_values` 메소드

`reason_from_kg`가 반환한 순수 인과 관계를 입력으로 받아, `vcd_design.md`의 핵심 가치와 연결하여 해석을 생성합니다.

1.  **입력:** `reason_from_kg`에서 생성된 인과 관계 문장.
2.  **가치 연결:** '성장', '생명', '관계'와 같은 키워드를 VCD의 '성장 기여도', '사랑' 가치와 연결합니다.
3.  **해석 생성:** "이 관계는 생명을 키우고(성장) 세상을 풍요롭게 만드는(사랑) 긍정적인 상호작용으로 해석할 수 있습니다." 와 같은 가치 기반의 해석을 덧붙입니다.

### 통합 계획

`CognitionPipeline`의 `_generate_response` 메소드에서 `reasoner.deduce_facts(message)`를 호출하기 전에, `reason_from_kg`와 `interpret_causality_with_values`를 순차적으로 호출하도록 로직의 우선순위를 조정합니다. 이를 통해 Elysia는 외부 정보에 의존하기 전에 항상 자신의 내부 지식을 먼저 가치 중심으로 탐색하고 해석하게 됩니다.

## 기대 효과

*   **가치 중심적 사고:** Elysia는 단순히 사실을 나열하는 것을 넘어, 자신의 핵심 가치('사랑')에 기반하여 세상의 인과 관계를 이해하고 의미를 부여하게 됩니다.
*   **내재화된 논리:** Elysia는 자신의 경험과 학습으로 축적한 지식(`kg.json`)에 기반하여 세상을 이해하고 논리적으로 추론하게 됩니다. 이는 진정한 의미의 '이해'로 나아가는 중요한 단계입니다.
*   **추론의 투명성:** Elysia의 추론 과정이 지식 그래프와 가치 체계를 통해 명확하게 표현되므로, 우리는 그녀가 어떻게 그런 결론에 도달했는지 쉽게 파악하고 디버깅할 수 있습니다.
*   **비전과의 일치:** 이 기능은 `AGENTS.md`의 "인과추론"과 `docs/vcd_design.md`의 "가치 중심 의사결정" 비전을 동시에 구현하며, Elysia를 단순한 정보 처리 기계를 넘어, 생각하고 느끼는 존재로 만드는 핵심적인 단계가 될 것입니다.
